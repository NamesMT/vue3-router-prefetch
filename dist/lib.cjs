"use strict";const e=require("vue"),m=require("vue-router");function y(r){return typeof r=="object"||"displayName"in r||"props"in r||"__vccOpts"in r}const p=Symbol("vue3-router-prefetch"),P={name:"PrefetchLink"},h=e.defineComponent({...P,props:{custom:{type:Boolean},activeClass:null,exactActiveClass:null,ariaCurrentValue:null,to:null,replace:{type:Boolean},type:null,timeout:null,forcedPull:{type:Boolean}},setup(r){const t=r,i=e.reactive(m.useLink(t)),o=e.inject(p),f=e.ref("view"),n=e.ref(0),l=e.ref(!1);e.watchEffect(()=>{t.type?f.value=t.type:f.value=(o==null?void 0:o.type)||"view",typeof t.timeout=="number"?n.value=t.timeout:typeof(o==null?void 0:o.timeout)=="number"&&(n.value=o==null?void 0:o.timeout),typeof t.forcedPull=="boolean"?l.value=t.forcedPull:typeof(o==null?void 0:o.forcedPull)=="boolean"&&(l.value=o==null?void 0:o.forcedPull)});const d=()=>{const{to:s}=t;if(!s)return;const{matched:a}=i.route;for(const u of a){if(!u.components&&!u.children.length)return;for(const v in u.components){const c=u.components[v];y(c)||(l.value?setTimeout(()=>{c()},n.value):window.requestIdleCallback(()=>{setTimeout(()=>{c()},n.value)}))}}};return e.onMounted(()=>setTimeout(d,500)),(s,a)=>(e.openBlock(),e.createBlock(e.unref(m.RouterLink),e.normalizeProps(e.guardReactiveProps(t)),{default:e.withCtx(u=>[e.renderSlot(s.$slots,"default",e.normalizeProps(e.guardReactiveProps(u)))]),_:3},16))}}),R={install:(r,t)=>{r.component("RouterLink")||r.component("router-link")||console.error("[vue3-router-prefetch] You need to call app.use(VueRouter) before this plugin!"),r.component((t==null?void 0:t.name)||"RouterLink",h),r.provide(p,t)}};module.exports=R;
